extends layout

block content
  div(ng-init="addBuoy = {isOpen: false}")
  .mb-20
    if isAuthenticated
      span.block-list-add(ng-click="addBuoy.isOpen = !addBuoy.isOpen")
        |+ Add Buoy
    else
      a.block-list-add(href="/login")
        |+ Add Buoy
    .clear

  if isAuthenticated
    .mb-20(ng-if="addBuoy.isOpen")
        form.form(
          ng-add-buoy,
          name="addBuoyForm"
        )
          .field
            label
              span Buoy ID
              input(type='text', ng-model='req.buoyid', ng-required="true")

          .field
            label
              span Name
              input(type='text', ng-model='req.name')

          .field.errors(ng-if="error") {{ error }}

          .field.text-center
            span.btn.cancel(ng-click="addBuoy.isOpen = false") Cancel
            | &nbsp;
            input.btn.submit(
              type="submit",
              ng-click="submit()",
              ng-disabled="loading || addBuoyForm.$invalid || addBuoyForm.$pristine"
              value="Submit"
            )

  ul.block-list
    for buoy in buoys.rows
      li
        a(href="/buoys/#{buoy.buoyid}") #{buoy.buoyid}: #{buoy.name}

